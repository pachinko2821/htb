<!DOCTYPE html>
<html>
 <head>
  <meta content="text/html; charset=utf-8" http-equiv="content-type"/>
  <title>
   tabby
  </title>
  <meta content="CherryTree" name="generator"/>
  <link href="res/styles3.css" rel="stylesheet" type="text/css"/>
  <script>
  </script>
 </head>
 <body>
  <div class="page">
   <h1 class="title">
    <img alt="{{site.baseurl}}/assets/images/tabby/tabby.jpg" src="{{site.baseurl}}/assets/images/tabby/tabby.jpg"/>
   </h1>
   <br/>
   INFO GATHERING/FINGER-PRINTING:
   <br/>
   <br/>
   <div class="codebox">
    <div class="codebox">
     # Nmap 7.80 scan initiated Tue Jun 23 03:07:25 2020 as: nmap --min-rate 1000 -A -Pn -p22,80,8080 -oT 10.10.10.194
     <br/>
     Nmap scan report for 10.10.10.194
     <br/>
     Host is up (0.55s latency).
     <br/>
     <br/>
     PORT     STATE SERVICE VERSION
     <br/>
     22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)
     <br/>
     80/tcp   open  http    Apache httpd 2.4.41 ((Ubuntu))
     <br/>
     |_http-server-header: Apache/2.4.41 (Ubuntu)
     <br/>
     |_http-title: Mega Hosting
     <br/>
     8080/tcp open  http    Apache Tomcat
     <br/>
     |_http-title: Apache Tomcat
     <br/>
     Warning: OSScan results may be unreliable because we could not find at least 1 open and 1 closed port
     <br/>
     Aggressive OS guesses: Linux 2.6.32 (95%), Linux 3.1 (95%), Linux 3.2 (95%), AXIS 210A or 211 Network Camera (Linux 2.6.17) (94%), ASUS RT-N56U WAP (Linux 3.4) (93%), Linux 3.16 (93%), Linux 2.6.39 - 3.2 (92%), Linux 3.1 - 3.2 (92%), Linux 3.2 - 4.9 (92%), Linux 3.7 - 3.10 (92%)
     <br/>
     No exact OS matches for host (test conditions non-ideal).
     <br/>
     Network Distance: 2 hops
     <br/>
     Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
     <br/>
     <br/>
     TRACEROUTE (using port 80/tcp)
     <br/>
     HOP RTT       ADDRESS
     <br/>
     1   550.47 ms 10.10.16.1
     <br/>
     2   550.98 ms 10.10.10.194
     <br/>
     <br/>
     OS and Service detection performed. Please report any incorrect results at https://nmap.org/submit/ .
     <br/>
     # Nmap done at Tue Jun 23 03:08:26 2020 -- 1 IP address (1 host up) scanned in 61.52 seconds
     <br/>
     <br/>
    </div>
   </div>
   <br/>
   <br/>
   port 8080 has apache tomcat
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-1.png" src="{{site.baseurl}}/assets/images/tabby/1-1.png"/>
   <br/>
   <br/>
   port 80 has website, LFI at news.php?file=
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-2.png" src="{{site.baseurl}}/assets/images/tabby/1-2.png"/>
   <br/>
   we also get username ash
   <br/>
   <br/>
   ssh at port 22
   <br/>
   <br/>
   tried to read tomcat-users.xml, tomcat is not installed in /opt/tomcat. these can be some other installation directories
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-3.png" src="{{site.baseurl}}/assets/images/tabby/1-3.png"/>
   <br/>
   <br/>
   tomcat is installed in /usr/share/tomcat9. contents of tomcat-users.xml:
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-4.png" src="{{site.baseurl}}/assets/images/tabby/1-4.png"/>
   <br/>
   <br/>
   credentials  tomcat:$3cureP4s5w0rd123!
   <br/>
   <br/>
   FOOTHOLD
   <br/>
   <br/>
   upload war file via curl to get foothold
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-5.png" src="{{site.baseurl}}/assets/images/tabby/1-5.png"/>
   <br/>
   <br/>
   ENUM
   <br/>
   linpeas shows backup file in folder accessible via http
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-6.png" src="{{site.baseurl}}/assets/images/tabby/1-6.png"/>
   <br/>
   <br/>
   PRIVESC TO USER
   <br/>
   crack the zip file with fcrakzip, the password is admin@it
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-7.png" src="{{site.baseurl}}/assets/images/tabby/1-7.png"/>
   <br/>
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-8.png" src="{{site.baseurl}}/assets/images/tabby/1-8.png"/>
   <br/>
   <br/>
   <br/>
   PRIVESC TO ROOT
   <br/>
   <br/>
   lxd (linux container) is installed and is running as root
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-9.png" src="{{site.baseurl}}/assets/images/tabby/1-9.png"/>
   <br/>
   <br/>
   check lxd privesc
   <br/>
   <a href="https://www.hackingarticles.in/lxd-privilege-escalation/">
    https://www.hackingarticles.in/lxd-privilege-escalation/
   </a>
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-10.png" src="{{site.baseurl}}/assets/images/tabby/1-10.png"/>
   <br/>
   <br/>
   <img alt="{{site.baseurl}}/assets/images/tabby/1-11.png" src="{{site.baseurl}}/assets/images/tabby/1-11.png"/>
   <br/>
   <br/>
  </div>
 </body>
</html>
